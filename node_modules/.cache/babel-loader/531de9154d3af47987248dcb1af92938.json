{"ast":null,"code":"var _jsxFileName = \"D:\\\\IDEA\\\\BlockChain\\\\myapp\\\\src\\\\components\\\\register\\\\RegisterForm.js\";\nimport React from 'react';\nimport 'antd/dist/antd.css';\nimport './RegisterForm.css';\nimport { Form, Input, Button, message } from 'antd';\nimport axios from \"axios\";\nimport { Route, Redirect } from 'react-router-dom';\n\nclass RegisterForm extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSubmit = e => {\n      // e.preventDefault();\n      this.props.form.validateFieldsAndScroll((err, values) => {\n        if (!err) {\n          // console.log('Received values of form: ', values);\n          axios.post('', {\n            values\n          }).then(res => {\n            console.log(res);\n\n            if (res.data.state === \"success\") {\n              this.setState({\n                registerFlag: true\n              });\n            } else {\n              this.setState({\n                registerFlag: false\n              });\n              message.error(res.data.msg);\n            }\n          }).catch(err => {\n            console.log(err);\n            this.setState({\n              registerFlag: false\n            });\n          });\n        } //如果没有错误，则发送用户信息给后端\n        else {\n            message.error('注册信息有误！');\n          }\n      });\n    };\n\n    this.handleConfirmBlur = e => {\n      const value = e.target.value;\n      this.setState({\n        confirmDirty: this.state.confirmDirty || !!value\n      });\n    };\n\n    this.compareToFirstPassword = (rule, value, callback) => {\n      const form = this.props.form;\n\n      if (value && value !== form.getFieldValue('pwd')) {\n        callback('两次密码不一致');\n      } else {\n        callback();\n      }\n    };\n\n    this.validateToNextPassword = (rule, value, callback) => {\n      const form = this.props.form;\n\n      if (value && this.state.confirmDirty) {\n        form.validateFields(['rpwd'], {\n          force: true\n        });\n      }\n\n      callback();\n    };\n\n    this.state = {\n      registerFlag: false,\n      confirmDirty: false,\n      autoCompleteResult: []\n    };\n  }\n\n  render() {\n    if (this.state.registerFlag) {\n      return React.createElement(Redirect, {\n        to: \"/Login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      });\n    }\n\n    const getFieldDecorator = this.props.form.getFieldDecorator;\n    const formItemLayout = {\n      labelCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 5\n        }\n      },\n      wrapperCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 16\n        }\n      }\n    };\n    const tailFormItemLayout = {\n      wrapperCol: {\n        xs: {\n          span: 24,\n          offset: 0\n        },\n        sm: {\n          span: 16,\n          offset: 8\n        }\n      }\n    };\n    return React.createElement(Form, Object.assign({}, formItemLayout, {\n      onSubmit: this.handleSubmit,\n      className: \"register-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }), React.createElement(\"h2\", {\n      className: \"Register\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, \"WELCOME TO JOIN US\"), React.createElement(Form.Item, {\n      label: \"\\u7528\\u6237\\u540D\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, getFieldDecorator('usr', {\n      rules: [{\n        required: true,\n        message: '请输入您的用户名'\n      }, {\n        min: 5,\n        max: 10,\n        message: '用户名为5-10位字符'\n      }, {\n        pattern: new RegExp('^\\\\w{5,10}$', 'g'),\n        message: '用户名必须为字母或者数字'\n      }]\n    })(React.createElement(Input, {\n      type: \"text\",\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u7528\\u6237\\u540D\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }))), React.createElement(Form.Item, {\n      label: \"\\u90AE\\u7BB1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, getFieldDecorator('email', {\n      rules: [{\n        type: 'email',\n        message: '邮箱格式不正确'\n      }, {\n        required: true,\n        message: '请输入您的邮箱'\n      }]\n    })(React.createElement(Input, {\n      placeholder: \"请输入您的邮箱\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }))), React.createElement(Form.Item, {\n      label: \"\\u5BC6\\u7801\",\n      hasFeedback: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, getFieldDecorator('pwd', {\n      rules: [{\n        required: true,\n        message: '请输入您的密码'\n      }, {\n        min: 6,\n        max: 15,\n        message: '密码为6-15位字符'\n      }, {\n        pattern: new RegExp('^\\\\w{6,15}$', 'g'),\n        message: '用户名必须为字母或者数字'\n      }, {\n        validator: this.validateToNextPassword\n      }]\n    })(React.createElement(Input.Password, {\n      placeholder: \"请输入您的密码\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }))), React.createElement(Form.Item, {\n      label: \"\\u786E\\u8BA4\\u5BC6\\u7801\",\n      hasFeedback: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, getFieldDecorator('rpwd', {\n      rules: [{\n        required: true,\n        message: '请再次输入您的密码'\n      }, {\n        validator: this.compareToFirstPassword,\n        message: '两次密码不一致'\n      }]\n    })(React.createElement(Input.Password, {\n      onBlur: this.handleConfirmBlur,\n      placeholder: \"请再次输入您的密码\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }))), React.createElement(Form.Item, {\n      label: \"\\u771F\\u5B9E\\u59D3\\u540D\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, getFieldDecorator('realname', {\n      rules: [{\n        required: true,\n        message: '请输入您的真实姓名'\n      }, {\n        pattern: new RegExp('^[\\u4e00-\\u9fa5]+$', 'g'),\n        message: '真实姓名有误'\n      }]\n    })(React.createElement(Input, {\n      placeholder: \"请输入您的真实姓名\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }))), React.createElement(Form.Item, {\n      label: \"\\u624B\\u673A\\u53F7\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, getFieldDecorator('phone', {\n      rules: [{\n        required: true,\n        message: '请输入您的手机号'\n      }, {\n        pattern: new RegExp('^1[3456789]\\\\d{9}$', 'g'),\n        message: '用户名必须为字母或者数字'\n      }]\n    })(React.createElement(Input, {\n      placeholder: \"请输入您的手机号\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }))), React.createElement(Form.Item, {\n      label: \"\\u8EAB\\u4EFD\\u8BC1\\u53F7\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, getFieldDecorator('IDcard', {\n      rules: [{\n        required: true,\n        message: '请输入您的身份证号'\n      }, {\n        pattern: new RegExp('^[1-9]\\\\d{5}(18|19|20)\\\\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\\\\d{3}[0-9Xx]$', 'g'),\n        message: '身份证号有误'\n      }]\n    })(React.createElement(Input, {\n      placeholder: \"请输入您的身份证号\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }))), React.createElement(Form.Item, {\n      label: \"\\u8F66\\u724C\\u53F7\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, getFieldDecorator('carnum', {\n      rules: [{\n        required: true,\n        message: '请输入您的车牌号'\n      }]\n    })(React.createElement(Input, {\n      placeholder: \"请输入您的车牌号\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }))), React.createElement(Form.Item, Object.assign({}, tailFormItemLayout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }), React.createElement(Button, {\n      type: \"primary\",\n      htmlType: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, \"Register\")));\n  }\n\n}\n\nexport default Form.create()(RegisterForm);","map":{"version":3,"sources":["D:/IDEA/BlockChain/myapp/src/components/register/RegisterForm.js"],"names":["React","Form","Input","Button","message","axios","Route","Redirect","RegisterForm","Component","constructor","props","handleSubmit","e","form","validateFieldsAndScroll","err","values","post","then","res","console","log","data","state","setState","registerFlag","error","msg","catch","handleConfirmBlur","value","target","confirmDirty","compareToFirstPassword","rule","callback","getFieldValue","validateToNextPassword","validateFields","force","autoCompleteResult","render","getFieldDecorator","formItemLayout","labelCol","xs","span","sm","wrapperCol","tailFormItemLayout","offset","rules","required","min","max","pattern","RegExp","type","validator","create"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport 'antd/dist/antd.css';\r\nimport './RegisterForm.css'\r\nimport {Form, Input, Button, message} from 'antd';\r\nimport axios from \"axios\";\r\nimport {Route, Redirect} from 'react-router-dom';\r\n\r\nclass RegisterForm extends React.Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            registerFlag:false,\r\n            confirmDirty: false,\r\n            autoCompleteResult: [],\r\n        };\r\n    }\r\n\r\n    handleSubmit = e => {\r\n        // e.preventDefault();\r\n        this.props.form.validateFieldsAndScroll((err, values) => {\r\n            if (!err) {\r\n                // console.log('Received values of form: ', values);\r\n                axios.post('', {values})\r\n                    .then(res => {\r\n                        console.log(res);\r\n                        if(res.data.state === \"success\"){\r\n                            this.setState({registerFlag:true})\r\n                        }\r\n                        else{\r\n                            this.setState({registerFlag:false});\r\n                            message.error(res.data.msg);\r\n\r\n                        }\r\n                    })\r\n                    .catch(err => {\r\n                        console.log(err);\r\n                        this.setState({\r\n                            registerFlag:false\r\n                        })\r\n                    });\r\n            }\r\n            //如果没有错误，则发送用户信息给后端\r\n            else{\r\n                message.error('注册信息有误！');\r\n            }\r\n        });\r\n    };\r\n\r\n    handleConfirmBlur = e => {\r\n        const { value } = e.target;\r\n        this.setState({ confirmDirty: this.state.confirmDirty || !!value });\r\n    };\r\n\r\n    compareToFirstPassword = (rule, value, callback) => {\r\n        const { form } = this.props;\r\n        if (value && value !== form.getFieldValue('pwd')) {\r\n            callback('两次密码不一致');\r\n        } else {\r\n            callback();\r\n        }\r\n    };\r\n\r\n    validateToNextPassword = (rule, value, callback) => {\r\n        const { form } = this.props;\r\n        if (value && this.state.confirmDirty) {\r\n            form.validateFields(['rpwd'], { force: true });\r\n        }\r\n        callback();\r\n    };\r\n\r\n\r\n\r\n    render() {\r\n        if(this.state.registerFlag){\r\n            return <Redirect to=\"/Login\"/>\r\n        }\r\n        const { getFieldDecorator } = this.props.form;\r\n        const formItemLayout = {\r\n            labelCol: {\r\n                xs: { span: 24 },\r\n                sm: { span: 5 },\r\n            },\r\n            wrapperCol: {\r\n                xs: { span: 24 },\r\n                sm: { span: 16 },\r\n            },\r\n        };\r\n        const tailFormItemLayout = {\r\n            wrapperCol: {\r\n                xs: {\r\n                    span: 24,\r\n                    offset: 0,\r\n                },\r\n                sm: {\r\n                    span: 16,\r\n                    offset: 8,\r\n                },\r\n            },\r\n        };\r\n\r\n        return (\r\n            <Form {...formItemLayout}\r\n                  onSubmit={this.handleSubmit}\r\n                  className=\"register-form\">\r\n                <h2 className={\"Register\"}>WELCOME TO JOIN US</h2>\r\n                <Form.Item label=\"用户名\">\r\n                    {getFieldDecorator('usr', {\r\n                        rules: [\r\n                            {\r\n                                required: true,\r\n                                message: '请输入您的用户名'\r\n                            },\r\n                            {\r\n                                min:5,max:10,\r\n                                message:'用户名为5-10位字符'\r\n                            },\r\n                            {\r\n                                pattern:new RegExp('^\\\\w{5,10}$','g'),\r\n                                message:'用户名必须为字母或者数字'\r\n                            }\r\n                        ],\r\n                    })(\r\n                        <Input type=\"text\" placeholder=\"请输入用户名\"/>,\r\n                    )}\r\n                </Form.Item>\r\n\r\n                <Form.Item label=\"邮箱\">\r\n                    {getFieldDecorator('email', {\r\n                        rules: [\r\n                            {\r\n                                type: 'email',\r\n                                message: '邮箱格式不正确',\r\n                            },\r\n                            {\r\n                                required: true,\r\n                                message: '请输入您的邮箱',\r\n                            },\r\n                        ],\r\n                    })(<Input placeholder={\"请输入您的邮箱\"}/>)}\r\n                </Form.Item>\r\n\r\n                <Form.Item label=\"密码\" hasFeedback>\r\n                    {getFieldDecorator('pwd', {\r\n                        rules: [\r\n                            {\r\n                                required: true,\r\n                                message: '请输入您的密码',\r\n                            },\r\n                            {\r\n                                min:6,max:15,\r\n                                message:'密码为6-15位字符'\r\n                            },\r\n                            {\r\n                                pattern:new RegExp('^\\\\w{6,15}$','g'),\r\n                                message:'用户名必须为字母或者数字'\r\n                            },\r\n                            {\r\n                                validator: this.validateToNextPassword,\r\n                            },\r\n                        ],\r\n                    })(<Input.Password placeholder={\"请输入您的密码\"}/>)}\r\n                </Form.Item>\r\n\r\n                <Form.Item label=\"确认密码\" hasFeedback>\r\n                    {getFieldDecorator('rpwd', {\r\n                        rules: [\r\n                            {\r\n                                required: true,\r\n                                message: '请再次输入您的密码',\r\n                            },\r\n                            {\r\n                                validator: this.compareToFirstPassword,\r\n                                message:'两次密码不一致'\r\n                            },\r\n                        ],\r\n                    })(<Input.Password onBlur={this.handleConfirmBlur} placeholder={\"请再次输入您的密码\"}/>)}\r\n                </Form.Item>\r\n\r\n                <Form.Item label=\"真实姓名\">\r\n                    {getFieldDecorator('realname', {\r\n                        rules: [\r\n                            {\r\n                                required: true,\r\n                                message: '请输入您的真实姓名'\r\n                            },\r\n                            {\r\n                                pattern:new RegExp('^[\\u4e00-\\u9fa5]+$','g'),\r\n                                message:'真实姓名有误'\r\n                            }\r\n                        ],\r\n                    })(<Input placeholder={\"请输入您的真实姓名\"}/>)}\r\n                </Form.Item>\r\n\r\n\r\n                <Form.Item label=\"手机号\">\r\n                    {getFieldDecorator('phone', {\r\n                        rules: [\r\n                            {\r\n                                required: true,\r\n                                message: '请输入您的手机号'\r\n                            },\r\n                            {\r\n                                pattern:new RegExp('^1[3456789]\\\\d{9}$','g'),\r\n                                message:'用户名必须为字母或者数字'\r\n                            }\r\n                            ],\r\n                    })(<Input placeholder={\"请输入您的手机号\"}/>)}\r\n                </Form.Item>\r\n\r\n                <Form.Item label=\"身份证号\">\r\n                    {getFieldDecorator('IDcard', {\r\n                        rules: [\r\n                            {\r\n                                required: true,\r\n                                message: '请输入您的身份证号'\r\n                            },\r\n                            {\r\n                                pattern:new RegExp('^[1-9]\\\\d{5}(18|19|20)\\\\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\\\\d{3}[0-9Xx]$','g'),\r\n                                message:'身份证号有误'\r\n                            }\r\n                        ],\r\n                    })(<Input placeholder={\"请输入您的身份证号\"}/>)}\r\n                </Form.Item>\r\n\r\n                <Form.Item label=\"车牌号\">\r\n                    {getFieldDecorator('carnum', {\r\n                        rules: [\r\n                            {\r\n                                required: true,\r\n                                message: '请输入您的车牌号'\r\n                            }\r\n                        ],\r\n                    })(<Input placeholder={\"请输入您的车牌号\"}/>)}\r\n                </Form.Item>\r\n\r\n                <Form.Item {...tailFormItemLayout}>\r\n                    <Button type=\"primary\" htmlType=\"submit\">\r\n                        Register\r\n                    </Button>\r\n                </Form.Item>\r\n            </Form>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Form.create()(RegisterForm);"]},"metadata":{},"sourceType":"module"}